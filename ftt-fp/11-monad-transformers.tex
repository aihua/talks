\batchmode
\makeatletter
\def\input@path{{/Users/sergei.winitzki/Code/talks/ftt-fp/}}
\makeatother
\documentclass[english]{beamer}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\usepackage{babel}
\ifx\hypersetup\undefined
  \AtBeginDocument{%
    \hypersetup{unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=true}
  }
\else
  \hypersetup{unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=true}
\fi

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
% this default might be overridden by plain title style
\newcommand\makebeamertitle{\frame{\maketitle}}%
% (ERT) argument for the TOC
\AtBeginDocument{%
  \let\origtableofcontents=\tableofcontents
  \def\tableofcontents{\@ifnextchar[{\origtableofcontents}{\gobbletableofcontents}}
  \def\gobbletableofcontents#1{\origtableofcontents}
}
\newenvironment{lyxcode}
  {\par\begin{list}{}{
    \setlength{\rightmargin}{\leftmargin}
    \setlength{\listparindent}{0pt}% needed for AMS classes
    \raggedright
    \setlength{\itemsep}{0pt}
    \setlength{\parsep}{0pt}
    \normalfont\ttfamily}%
   \def\{{\char`\{}
   \def\}{\char`\}}
   \def\textasciitilde{\char`\~}
   \item[]}
  {\end{list}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usetheme[secheader]{Boadilla}
\usecolortheme{seahorse}
\title[Chapter 11: Functor-lifted computations III]{Chapter 11: Computations in a functor context III. Monad transformers}
%\subtitle{Part 1: Intuitions, examples, use cases}
\author{Sergei Winitzki}
\date{2019-01-05}
\institute[ABTB]{Academy by the Bay}
\setbeamertemplate{headline}{} % disable headline at top
\setbeamertemplate{navigation symbols}{} % disable navigation bar at bottom
\usepackage[all]{xy}
\usepackage[nocenter]{qtree}
\makeatletter
% Macros to assist LyX with XYpic when using scaling.
\newcommand{\xyScaleX}[1]{%
\makeatletter
\xydef@\xymatrixcolsep@{#1}
\makeatother
} % end of \xyScaleX
\makeatletter
\newcommand{\xyScaleY}[1]{%
\makeatletter
\xydef@\xymatrixrowsep@{#1}
\makeatother
} % end of \xyScaleY

\makeatother

\begin{document}
\frame{\titlepage}
\begin{frame}{Computations within a functor context: Combining monads}
\begin{itemize}
\item Programs need to combine monadic ``effects''
\item ``Effect'' $\equiv$ what else happens in $A\Rightarrow M^{B}$
besides computing $B$ from $A$
\item Using Scala's \texttt{\textcolor{blue}{\footnotesize{}for}}/\texttt{\textcolor{blue}{\footnotesize{}yield}}
syntax (``functor block'')
\end{itemize}
\texttt{\textcolor{blue}{\footnotesize{}}}%
\begin{minipage}[t]{0.49\columnwidth}%
\begin{lyxcode}
\textcolor{blue}{\footnotesize{}(for~\{~i~$\leftarrow$~1~to~n}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~~~j~$\leftarrow$~1~to~n}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~~~k~$\leftarrow$~1~to~n}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~\}~yield~f(i,~j,~k)}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}).sum}{\footnotesize\par}
\end{lyxcode}
%
\end{minipage}\texttt{\textcolor{blue}{\footnotesize{}}}%
\begin{minipage}[t]{0.49\columnwidth}%
\begin{lyxcode}
\textcolor{blue}{\footnotesize{}(1~to~n).flatMap~\{~i~$\Rightarrow$}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~~(1~to~n).flatMap~\{~j~$\Rightarrow$}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~~~~(1~to~n).map~\{~k~$\Rightarrow$}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~~~~~~f(i,~j,~k)}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}~~\}\}\}.sum}{\footnotesize\par}
\end{lyxcode}
%
\end{minipage}\texttt{\textcolor{blue}{\footnotesize{}\medskip{}
}}{\footnotesize\par}
\begin{itemize}
\item \texttt{\textcolor{blue}{\footnotesize{}map}} replaces the last left
arrow, \texttt{\textcolor{blue}{\footnotesize{}flatMap}} replaces
other left arrows
\end{itemize}
\end{frame}

\begin{frame}{How \texttt{\textcolor{blue}{\footnotesize{}flatMap}} works with lists}

\begin{itemize}
\item consider \texttt{\textcolor{blue}{\footnotesize{}List(x1, x2, x3).flatMap(x
$\Rightarrow$ f(x))}} 
\item assume that 
\end{itemize}
\begin{lyxcode}
\textcolor{blue}{\footnotesize{}f:~X~$\Rightarrow$~List{[}Y{]}}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}f(x1)~=~List(y0,~y1)}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}f(x2)~=~List(y2)}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}f(x3)~=~List(y3,~y4,~y5,~y6)}{\footnotesize\par}
\end{lyxcode}
\begin{itemize}
\item then the result is \texttt{\textcolor{blue}{\footnotesize{}List(y0,
y1, y2, y3, y4, y5, y6)}} 
\end{itemize}
\end{frame}

\begin{frame}{Exercises I}
\begin{enumerate}
\item For a given \texttt{\textcolor{blue}{\footnotesize{}Set{[}Int{]}}},
compute all subsets $\left(w,x,y,z\right)$ of size 4 such that $w<x<y<z$
and $w+z=x+y$
\item Given 3 sequences $xs$, $ys$, $zs$ of type \texttt{\textcolor{blue}{\footnotesize{}Seq{[}Int{]}}},
compute all $\left(x,y,z\right)$ such that $x\in xs$, $y\in ys$,
$z\in zs$ and $x<y<z$ and $x+y+z<10$
\item Solve the $n$-queens problem on an $3\times3\times3$ cube
\item Write a tiny library for arithmetic using \texttt{\textcolor{blue}{\footnotesize{}Future}}'s;
use it to compute $1+2+...+100$ via \texttt{\textcolor{blue}{\footnotesize{}for}}/\texttt{\textcolor{blue}{\footnotesize{}yield}}
and verify the result. E.g.\ implement: 
\begin{lyxcode}
\textcolor{blue}{\footnotesize{}const:~Int~$\Rightarrow$~Future{[}Int{]}}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}add(x:~Int):~Int~$\Rightarrow$~Future{[}Int{]}}{\footnotesize\par}

\textcolor{blue}{\footnotesize{}isEqual(x:~Int):~Int~$\Rightarrow$~Future{[}Boolean{]}~}{\footnotesize\par}
\end{lyxcode}
\item Read a file into a string and write it to another file using Java
\texttt{\textcolor{blue}{\footnotesize{}Files}} and \texttt{\textcolor{blue}{\footnotesize{}Paths}}
API\texttt{\textcolor{blue}{\footnotesize{}. }}Use \texttt{\textcolor{blue}{\footnotesize{}Try}}
and \texttt{\textcolor{blue}{\footnotesize{}for}}/\texttt{\textcolor{blue}{\footnotesize{}yield}}
to make this safe.
\item Given a semigroup $W$, make a semimonad out of $F^{A}\equiv E\Rightarrow A\times W$ semimonad out of $F^{A}\equiv E\Rightarrow A\times W$ 
\item Implement a semimonad instance for the (recursive) type constructor
$F^{A}=A+A\times A+F^{A}+F^{A}\times F^{A}$
\item Find the largest prime number below 1000 via a simple \href{https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes}{Sieve of Eratosthenes};
use the \texttt{\textcolor{blue}{\footnotesize{}State{[}S, Int{]}}}
monad with \texttt{\textcolor{blue}{\footnotesize{}S = Array{[}Boolean{]}}} 
\end{enumerate}
\end{frame}

\end{document}
